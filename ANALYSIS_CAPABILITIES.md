# ROS 2 LiDAR Benchmark - 分析可能な項目

## 現在計測・分析できる項目

### 1. LiDAR点群データのパフォーマンス指標
- **公開頻度 (Hz)**
  - 平均、最小、最大、標準偏差
  - リアルタイム推移グラフ
  - 目標: 安定した高周波数（例: 10Hz以上）

- **ジッター (ms)**
  - メッセージ間隔の変動を計測
  - 平均、最小、最大、標準偏差
  - システムの安定性指標
  - 目標: 低ジッター（< 50ms）

- **帯域幅使用量 (Mbps)**
  - ネットワーク負荷の評価
  - 平均、最小、最大
  - データ転送効率の指標

- **スループット計測**
  - **メッセージスループット**: メッセージ数/秒
  - **データスループット**: MB/秒
  - **点群スループット**: K points/秒（最大値も記録）
  - **点群密度**: 平均points/メッセージ
  - リアルタイムグラフで可視化
  - LiDARセンサーの実効性能を評価

- **メッセージサイズ統計**
  - 平均メッセージサイズ (KB)
  - 総データ量 (MB)
  - 総点群数 (百万points)

### 2. システムリソース使用状況
- **CPU使用率 (%)**
  - システム全体の使用率
  - 1分間の移動平均
  - プロセス別の使用率（オプション）

- **メモリ使用率 (%)**
  - システム全体の使用率
  - 使用量 (GB)、利用可能量 (GB)
  - メモリリークの検出

- **ディスク使用率**
  - 空き容量の監視

### 3. 温度モニタリング
- **Jetson専用温度センサー**
  - CPU温度
  - GPU温度
  - AUX（補助）温度
  - AO（Always-On）温度
  - PMIC（電源管理IC）温度
  - Tboard（ボード）温度
  - Tdiode（ダイオード）温度

- **温度統計**
  - 各ゾーンの平均、最小、最大温度
  - 温度推移グラフ
  - 熱暴走リスクの評価

### 4. パフォーマンス評価
- **総合評価**
  - Performance Rating: Excellent/Good/Fair/Poor
  - Stability Rating: Excellent/Good/Fair/Poor

- **自動推奨事項**
  - 周波数が低い場合の最適化提案
  - ジッターが高い場合の対処法
  - リソース使用率が高い場合の改善案
  - 温度が高い場合の冷却提案

### 5. 可視化機能
- **リアルタイムダッシュボード**
  - 6つのグラフで全指標を同時監視：
    1. 公開頻度（Hz）
    2. ジッター（ms）
    3. 帯域幅（Mbps）
    4. システムリソース（CPU/メモリ %）
    5. 温度（°C）
    6. 点群スループット（K points/秒）
  - 60秒間の推移を表示（設定可能）
  - ダークテーマで見やすい表示

- **静的レポート**
  - JSON形式の詳細データ
  - Excel形式の分析レポート
  - グラフ画像の保存

### 6. 比較分析（将来拡張可能）
- 異なる設定での性能比較
- 複数回の実行結果の統計分析
- ベースラインとの比較

## 使用例

### パフォーマンステスト
```bash
# 60秒間の標準ベンチマーク
ros2 launch ros2_lidar_benchmark benchmark.launch.py

# 長時間の安定性テスト（5分間）
ros2 launch ros2_lidar_benchmark benchmark.launch.py \
  analysis_duration:=300.0
```

### 結果の解釈
- **良好な状態**：
  - 周波数: > 10Hz、安定
  - ジッター: < 25ms
  - CPU: < 70%
  - 温度: < 70°C
  - スループット: センサー仕様に対して80%以上

- **要改善**：
  - 周波数: < 5Hz または不安定
  - ジッター: > 50ms
  - CPU: > 80%
  - 温度: > 80°C
  - スループット: 期待値の50%未満

## 出力ファイル
1. `/tmp/lidar_benchmark_report.json` - 生データ
2. `/tmp/lidar_benchmark_report.xlsx` - Excel分析レポート
3. `/tmp/lidar_benchmark/benchmark_*.png` - グラフ画像